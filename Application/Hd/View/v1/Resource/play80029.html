<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="page-view-size" content="1280*720">
        <title></title>
        <script type="text/javascript" src="__COMMON__/js/base.js?__CSSJS_VERSION__"></script>
        <script type="text/javascript" src="__COMMON__/js/play/play{$areacode}.js?__CSSJS_VERSION__"></script>
        <style type="text/css">
            body{ 
                background:transparent;
            }

            #div_control{
                position:absolute;
                width:332px;
                height:85px;
                top:550px;
                left:474px;
                visibility:hidden;
                background-image: url(__HD__/images/play/handle_bg.png);
            }

            #div_top{
                position:absolute;
                width:282px;
                height:57px;
                top:60px;
                left:100px;
                visibility:visible;
                background-image: url(__HD__/images/play/exercise_bg.png);            
            }
            
            #div_back{
                position:absolute;
                width:434px;
                height:287px;
                top:216px;
                left:423px;
                display:none;
                background-image: url(__HD__/images/play/back_bg.png);            	
            }

            #div_gift{
                position:absolute;
                width:669px;
                height:424px;
                top:148px;
                left:305px;
                display:none;
                background-image: url(__HD__/images/play/gift_bg.png);            	
            }
            
            #back_transparent_bg{
                position:absolute;
                width:1280px;
                height:720px;
                top:0px;
                left:0px;
                display:none;
                background-image: url(__HD__/images/common/popup/bg.png);            	
            }
            
        </style>

        		
		<script type="text/javascript">
            var buttons =
                    [
                        /*左边按钮*/
                        {id: 'btn_pre', name: '', action: '', linkImage: '__HD__/images/play/btn_pre.png', focusImage: '__HD__/images/play/btn_pre_over.png',focusHandler:'setEnter()', selectBox: '', left: '', right: 'btn_current', up: 'btn_exercise', down: ''},
                        {id: 'btn_current', name: '', action: '', linkImage: '__HD__/images/play/btn_current.png', focusImage: '__HD__/images/play/btn_current_over.png',focusHandler:'setEnter()', selectBox: '', left: 'btn_pre', right: 'btn_next', up: 'btn_exercise', down: ''},
                        {id: 'btn_next', name: '', action: '', linkImage: '__HD__/images/play/btn_next.png', focusImage: '__HD__/images/play/btn_next_over.png',focusHandler:'setEnter()', selectBox: '', left: 'btn_current', right: '', up: 'btn_exercise', down: ''},
                        /*游戏练习*/
                        {id: 'btn_exercise', name: '', action: '', linkImage: '__HD__/images/play/btn_exercise.png', focusImage: '__HD__/images/play/btn_exercise_over.png',focusHandler:'setEnter()',selectBox: '', left: '', right: '', up: '', down: 'btn_current'},
                    	/*返回弹窗上的按钮*/
                        {id: 'btn_see', name: '', action: 'closeBackDiv()', linkImage: '__HD__/images/play/btn_see.png', focusImage: '__HD__/images/play/btn_see_over.png',focusHandler:'setEnter()', selectBox: '', left: '', right: '', up: '', down: 'btn_no_see'},
                        {id: 'btn_no_see', name: '', action: 'backUpPage()', linkImage: '__HD__/images/play/btn_no_see.png', focusImage: '__HD__/images/play/btn_no_see_over.png',focusHandler:'setEnter()', selectBox: '', left: '', right: '', up: 'btn_see', down: ''},
                    ];

            
            

            /**
             * 显示播放控件
             */
            function showMenu(show)
            {
            	if(show){
            		G('div_control').style.display = 'block';
                    Epg.Button.set('btn_current');
            	}else{
            		G('div_control').style.display = 'none';
					if(Epg.btn.current.id != 'btn_exercise'){
						Epg.Button.set('btn_current');
					}
            	}
            }
            
            var nextSection = '{$playData["nextSection"]}';
            
            var videoContent = 'rtsp://125.210.177.184:554/xjhdsan05/ts/20141004000077.ts';//'{$playData[content]}';
            var prevUrl = '{$playData[prevUrl]}';
            var nextUrl = '{$playData[nextUrl]}';
            var libUrl = '{$playData[libUrl]}';
            var backUrl = "{$backUrl}";
            var libId =	"{$section['libId']}";
            var timer = '';
			var timeShow;
            var curPlayTime;
            var totalPlayTime;
            var next_url = '';
            var haveWindow = 0;
			
            //自动播放地址
			
			if(libId){
				next_url = libUrl;
			}else if (nextUrl) {
				next_url = nextUrl;
			} else {
				next_url = backUrl;
			}
            
			
			var KEY_PLAY_PAUSE = 13;//播放或是暂停
			var KEY_VOL_UP = 4;//音量加大
			var KEY_VOL_DOWN = 3; //音量减少
			var KEY_FAST_FORWARD = 373; //快进
			var KEY_FAST_REWIND = 372; //快退
			
			
            
            Epg.key.set({KEY_VOL_UP:"volUp()"});
            Epg.key.set({KEY_VOL_DOWN:"volDown()"});
            Epg.key.set({KEY_FAST_FORWARD:"fastForward_fun()"});
            Epg.key.set({KEY_FAST_REWIND:"fastRewind_fun()"});
			
			var speedStatus = 0; //快进或快退状态，0为都不是
			
			//快进
			function fastForward_fun(){
				//speedStatus = 1;
				fastTimeForward(5);
				//speed = getVideoSpeed();
				//G('speed').innerHTML = '快进：x'+speed;
				showMenu(true);
				/*
				G('btn_current').src="__HD__/images/play/btn_current_stop_over.png";
				buttons[1]['linkImage'] = '__HD__/images/play/btn_current_stop.png';
				buttons[1]['focusImage'] = '__HD__/images/play/btn_current_stop_over.png';*/
			}
			
			//快退
            function fastRewind_fun(){
				//speedStatus = 2;
				//G('speed').style.display = 'block';
				fastTimeRewind(5);
				//speed = getVideoSpeed();
				//G('speed').innerHTML = '快退：x'+speed;
				showMenu(true);
				/*
				G('btn_current').src="__HD__/images/play/btn_current_stop_over.png";
				buttons[1]['linkImage'] = '__HD__/images/play/btn_current_stop.png';
				buttons[1]['focusImage'] = '__HD__/images/play/btn_current_stop_over.png';*/
			}
			
			
			Epg.Button.defBack = function(){
				clearTimeout(timeShow);
				clearTimeout(timer);
            	if(haveWindow == 0){
					haveWindow = 1;
					G('btn_current').src="__HD__/images/play/btn_current_stop_over.png";
            		buttons[1]['linkImage'] = '__HD__/images/play/btn_current_stop.png';
            		buttons[1]['focusImage'] = '__HD__/images/play/btn_current_stop_over.png'; 		
            		G('div_back').style.display = 'block';
                    Epg.Button.set('btn_see');
					pause();
            	}else{
					haveWindow = 0;
            		G('btn_current').src="__HD__/images/play/btn_current_over.png";
            		buttons[1]['linkImage'] = '__HD__/images/play/btn_current.png';
            		buttons[1]['focusImage'] = '__HD__/images/play/btn_current_over.png';
                	G('div_back').style.display = 'none';
					<if condition="$section['libId'] neq ''">
						Epg.Button.set('btn_exercise');
					<else />
						Epg.Button.set('btn_current');
					</if>
					play();
            	}
				return false;
			}
			
            
            function viewPlayOrStop(){
			/*
				if(speedStatus == 1 || speedStatus == 2){
					playStatus = 0;
					speedStatus = 0;
					G('speed').style.display = 'none';
				}*/
				if(timeShow!=''){
					clearTimeout(timeShow);
				}
        		showMenu(true);
				var currentButton = Epg.btn.current.id;
				if(currentButton == 'btn_current'){
					if(playStatus == 1){
						pause();
						if(timer!=''){
							clearTimeout(timer);
						}
						G('btn_current').src="__HD__/images/play/btn_current_stop_over.png";
						buttons[1]['linkImage'] = '__HD__/images/play/btn_current_stop.png';
						buttons[1]['focusImage'] = '__HD__/images/play/btn_current_stop_over.png';
					}else{
						if(timer!=''){
							clearTimeout(timer);
						}
						timer = setTimeout("showMenu()", 3000);
						G('btn_current').src="__HD__/images/play/btn_current_over.png";
						buttons[1]['linkImage'] = '__HD__/images/play/btn_current.png';
						buttons[1]['focusImage'] = '__HD__/images/play/btn_current_over.png';
						play();
					}
				}
            	
            }
            
			
			function setEnter(){
				if(Epg.btn.current.id == 'btn_current'){
					Epg.key.set({KEY_PLAY_PAUSE:"viewPlayOrStop()"});
				}else{
					Epg.key.set({KEY_PLAY_PAUSE:"Epg.Button.click()"});
				}
			}
			
			function closeBackDiv(){
				haveWindow = 0;
            	G('div_back').style.display = 'none';
				G('btn_current').src="__HD__/images/play/btn_current_over.png";
				buttons[1]['linkImage'] = '__HD__/images/play/btn_current.png';
				buttons[1]['focusImage'] = '__HD__/images/play/btn_current_over.png';
				play();
				setTimeout("showMenu()", 1000);
            }
			
			function backUpPage(){
            	window.location = backUrl;
            }
			
			var movies = [videoContent];
			initMedia(0, 0, 1280, 720);
			
			window.onload = function() {
				<if condition="$section['libId'] neq ''">
					Epg.btn.init('btn_exercise', buttons, true);
				<else />
					Epg.btn.init('btn_current', buttons, true);
				</if>
            }
			timeShow = setTimeout("showMenu()", 6000);
			/*
            document.onkeypress = function(keyEvent){
            	keyEvent = keyEvent ? keyEvent : window.event;
            	var keyval = keyEvent.which ? keyEvent.which : keyEvent.keyCode;
            	if(keyval == 340){
					tcDefBack();
					return false;
				}
            }*/
        </script> 
    </head>
    <body onUnload="javascript:destory()">
        <a id="a_back" style="display:none;" href="{:get_back_url('Index/recommend',1)}" ></a>
        <!-- 页面左侧 -->
        <div id="div_control">
            <!-- 上一集 -->
            <div id="div_btn_pre" style="position:absolute;width:28px;height:31px;left:50px;top:25px;z-index: 1000;">
                <img id="btn_pre" title="{$playData['prevUrl']}" src="__HD__/images/play/btn_pre.png" width="28" height="31">
            </div>
            <!-- 播放暂停 -->
            <div id="div_btn_current" style="position:absolute;width:48px;height:49px;left:138px;top:14px;">
                <img id="btn_current" src="__HD__/images/play/btn_current.png" width="48" height="49">
            </div>
            <!-- 下一集 -->
            <div id="div_btn_next" style="position:absolute;width:28px;height:31px;left:254px;top:25px;">
                <img id="btn_next" title="{$playData['nextUrl']}" src="__HD__/images/play/btn_next.png" width="31" height="28">
            </div>
        </div>
        
		
        <!-- 练习-->
        <if condition="$section['libId'] neq ''">
        	<div id="div_top">
                <div id="div_btn_exercise" style="position:absolute;width:137px;height:42px;left:141px;top:3px;">
                    <img id="btn_exercise" title="{$playData[libUrl]}" src="__HD__/images/play/btn_exercise.png" width="137" height="42">
                </div>
        	</div>
        </if>  
		
		<div id="back_transparent_bg"></div>
		
		<!-- 返回弹窗 -->
		<div id="div_back">
            <div id="div_btn_see" style="position:absolute;width:146px;height:56px;left:60px;top:55px;">
                <img id="btn_see" src="__HD__/images/play/btn_see.png" width="146" height="56">
            </div>
            <div id="div_btn_no_see" style="position:absolute;width:146px;height:56px;left:60px;top:130px;">
                <img id="btn_no_see" src="__HD__/images/play/btn_no_see.png" width="146" height="56">
            </div>
		</div>
		
		<!-- 快进或是快退 -->
		<div id="speed" style="display:none;position:absolute;left:100px;top:550px;z-index:1000;font-size:36px;font-weight:700;"></div>

    </body>
</html>